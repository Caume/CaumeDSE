Install Instructions
====================

Install From Source code
------------------------

Installing from the source code is straightforward:


1. 	Make sure you have installed software and libraries:

	* PERL (version 5.10.0 or higher)
	* Libmicrohttpd (version 0.9.17 or higher, which in turn requires 
	  GnuTLS for TLS support version 2.6.6 or higher).
	* OpenSSL (version 0.98 should work, 1.00 or higher is preferred)

Note: SQLITE is compiled and integrated ath the same time that CaumeDSE
(Replace files within the sqlite directory with the latest amalgamation 
distribution if needed).

2. Configure the package with:

	./configure

   By default the package is compiled in DEBUG  mode. If you want to compile
   the package in release mode add the following parameter when calling the
   configure script:

	--enable-RELEASE

   If your want the test database to be copied to the default data directory
   add the following parameter when calling the configure script:

	--enable-TESTDATABASE
	
3. Compile with gcc (or other C compiler) and make by issuing the following
   command:	
	
	make 

4. Install:

	make install

(Note: by default the software will be installed in /opt/cdse)

5. On the first run, the CaumeDSE platform will create its own databases in
   /opt/cdse if it doesn't find any there (LogsDB, ResourcesDB and RolesDB,
   these are SQLite databases, their contents are encrypted in the same way as
   user data is encrypted).

   At this point CaumeDSE will create for you a default organization (EngineOrg) 
   and an administration user (EngineAdmin) and will setup its roles with full
   powers to give you an administration account to start with. The organization
   key with which all roles, and data in related to this organization is encrypted
   will be generated automatically with a PRNG and this is the only time that it 
   will be shown. If you loose it you loose access to your instance (unless you 
   were able to create another organization and users with enough privileges),
   so TAKE NOTE OF THIS KEY.

6. Read the README file for general instructions, on how to use this software,
   available functionality and current limitations.

   For features that we expect to include in future versions read the TODO file.



Test files and DB
-----------------

In DEBUG mode, CaumeDSE will run a series of tests automatically when the program 
starts. The test files in TEST/testfiles are needed for these tests and they will 
be copied automatically by the Makefile whe you compile in DEBUG mode (default).

There is a test database with users and test certificates that you may use
to try out CaumeDSE, which includes some loeaded files, and a perl script to 
parse it, all being done with the default organization (EngineOrg) and 
administrator account (EngineAdmin). 

To use this test organization (do not use it for production under any 
circumstances!) just use the configure script parameter mentioned in step 2
of the Installation procedure (WARNING: YOU WILL OVERWRITE THE PROGRAM DATABASES! 
make backups first). Note that this test DB expects EngineStorage files to be
in /opt/cdse.

The KEY for this test organization will be located in 
/opt/cdse/secureTmp/EngineOrg.key.txt in clear text.

Digital certificates requests an a p12 certificate ready to install in a 
browser for EngineAdmin are included in TEST/testCertAuth (ca.pem, server.key
and server.pem within the test database are the same os those in this folder)


